# ðŸŽ‰ PandaFactor æœåŠ¡æˆåŠŸè¿è¡Œï¼

## âœ… å½“å‰çŠ¶æ€

æ ¹æ®æ—¥å¿—æ˜¾ç¤ºï¼Œæ‚¨çš„æœåŠ¡**å·²ç»æˆåŠŸè¿è¡Œ**ï¼š

```
âœ… æœåŠ¡è¿è¡Œåœ¨: http://0.0.0.0:8111
âœ… å› å­APIæ­£å¸¸å·¥ä½œ
âœ… MongoDBè¿žæŽ¥æˆåŠŸ
âœ… Webç•Œé¢å¯è®¿é—®
âœ… å·²æˆåŠŸåˆ›å»ºå› å­
```

---

## ðŸ“Š æ—¥å¿—åˆ†æž

### æˆåŠŸçš„æ“ä½œ

```
âœ… GET /factor/ - Webç•Œé¢åŠ è½½æˆåŠŸ
âœ… POST /api/v1/create_factor - å› å­åˆ›å»ºæˆåŠŸ
âœ… GET /api/v1/query_factor - å› å­æŸ¥è¯¢æˆåŠŸ
âœ… Successfully created user factor: bB73fb153
```

### "ç¼ºå°‘å› å­"çš„è¯´æ˜Ž

```
æœªæ‰¾åˆ°ç”¨æˆ· 0 çš„å› å­
```

è¿™æ˜¯**æ­£å¸¸çš„**ï¼Œå› ä¸ºï¼š
1. æ•°æ®åº“åˆšåˆšåˆå§‹åŒ–ï¼Œæ˜¯ç©ºçš„
2. æ‚¨å·²ç»æˆåŠŸåˆ›å»ºäº†ç¬¬ä¸€ä¸ªå› å­
3. åˆ·æ–°é¡µé¢å°±èƒ½çœ‹åˆ°äº†

---

## ðŸš€ æ·»åŠ ç¤ºä¾‹å› å­

ä¸ºäº†è®©ç•Œé¢æ›´ä¸°å¯Œï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ·»åŠ ç¤ºä¾‹å› å­ï¼š

```powershell
py add_sample_factors.py
```

è¿™ä¼šæ·»åŠ 5ä¸ªå¸¸ç”¨çš„æŠ€æœ¯æŒ‡æ ‡å› å­ï¼š
- MA20 (20æ—¥ç§»åŠ¨å¹³å‡çº¿)
- RSI14 (ç›¸å¯¹å¼ºå¼±æŒ‡æ ‡)
- MACD (ç§»åŠ¨å¹³å‡æ”¶æ•›æ•£åº¦)
- æˆäº¤é‡æ¯”çŽ‡
- å¸ƒæž—å¸¦å®½åº¦

---

## ðŸŒ è®¿é—®æœåŠ¡

### 1. å› å­ç•Œé¢ï¼ˆä¸»è¦åŠŸèƒ½ï¼‰
```
http://127.0.0.1:8111/factor/
```

**åŠŸèƒ½**:
- âœ… æŸ¥çœ‹å› å­åˆ—è¡¨
- âœ… åˆ›å»ºæ–°å› å­
- âœ… ç¼–è¾‘å› å­ä»£ç 
- âœ… æŸ¥çœ‹å› å­æ€§èƒ½

### 2. APIæ–‡æ¡£
```
http://127.0.0.1:8111/docs
```

**åŠŸèƒ½**:
- âœ… äº¤äº’å¼APIæµ‹è¯•
- âœ… æŸ¥çœ‹æ‰€æœ‰APIç«¯ç‚¹
- âœ… æµ‹è¯•å› å­CRUDæ“ä½œ

### 3. ä¸»é¡µAPI
```
http://127.0.0.1:8111/
```

**è¿”å›ž**:
```json
{
  "message": "Welcome to PandaFactor Server (Fixed)!",
  "version": "1.0.1",
  "status": "running",
  "loaded_routes": ["âœ… Webç•Œé¢"],
  "endpoints": {
    "api_docs": "/docs",
    "api_v1": "/api/v1",
    "factor_ui": "/factor"
  }
}
```

---

## ðŸ’¡ ä½¿ç”¨å› å­ç•Œé¢

### åˆ›å»ºæ–°å› å­

1. è®¿é—® http://127.0.0.1:8111/factor/
2. ç‚¹å‡»"åˆ›å»ºå› å­"æŒ‰é’®
3. å¡«å†™å› å­ä¿¡æ¯ï¼š
   - å› å­åç§°ï¼šä¾‹å¦‚ "æˆ‘çš„å› å­"
   - å› å­ä»£ç ï¼šä¾‹å¦‚ `close.rolling(10).mean()`
   - å› å­æè¿°ï¼šä¾‹å¦‚ "10æ—¥å‡çº¿"
4. ç‚¹å‡»ä¿å­˜

### æŸ¥çœ‹å› å­åˆ—è¡¨

- å› å­ä¼šæ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­
- å¯ä»¥æŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡ï¼ˆæ”¶ç›ŠçŽ‡ã€å¤æ™®æ¯”çŽ‡ç­‰ï¼‰
- å¯ä»¥ç¼–è¾‘æˆ–åˆ é™¤å› å­

### ç¼–è¾‘å› å­ä»£ç 

- ç‚¹å‡»å› å­åç§°
- åœ¨ä»£ç ç¼–è¾‘å™¨ä¸­ä¿®æ”¹
- æ”¯æŒPythonè¯­æ³•é«˜äº®

---

## ðŸ”§ å¯ç”¨çš„APIç«¯ç‚¹

### å› å­ç®¡ç†

```
GET  /api/v1/user_factor_list    - èŽ·å–å› å­åˆ—è¡¨
POST /api/v1/create_factor       - åˆ›å»ºå› å­
GET  /api/v1/query_factor        - æŸ¥è¯¢å› å­è¯¦æƒ…
PUT  /api/v1/update_factor       - æ›´æ–°å› å­
DELETE /api/v1/delete_factor     - åˆ é™¤å› å­
GET  /api/v1/query_factor_status - æŸ¥è¯¢å› å­çŠ¶æ€
GET  /api/v1/query_task_status   - æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€
```

### æµ‹è¯•API

è®¿é—® http://127.0.0.1:8111/docs å¯ä»¥ç›´æŽ¥æµ‹è¯•æ‰€æœ‰API

---

## ðŸ“ å› å­ä»£ç ç¤ºä¾‹

### ç®€å•ç§»åŠ¨å¹³å‡
```python
close.rolling(20).mean()
```

### RSIæŒ‡æ ‡
```python
delta = close.diff()
gain = delta.where(delta > 0, 0)
loss = -delta.where(delta < 0, 0)
avg_gain = gain.rolling(14).mean()
avg_loss = loss.rolling(14).mean()
rs = avg_gain / avg_loss
rsi = 100 - (100 / (1 + rs))
rsi
```

### MACDæŒ‡æ ‡
```python
ema12 = close.ewm(span=12).mean()
ema26 = close.ewm(span=26).mean()
macd = ema12 - ema26
macd
```

### å¸ƒæž—å¸¦
```python
ma = close.rolling(20).mean()
std = close.rolling(20).std()
upper = ma + 2 * std
lower = ma - 2 * std
(close - lower) / (upper - lower)
```

---

## ðŸŽ¯ ä¸‹ä¸€æ­¥

### 1. æ·»åŠ ç¤ºä¾‹å› å­
```powershell
py add_sample_factors.py
```

### 2. åˆ·æ–°å› å­ç•Œé¢
```
http://127.0.0.1:8111/factor/
```

### 3. åˆ›å»ºè‡ªå·±çš„å› å­
- ä½¿ç”¨å› å­ç•Œé¢åˆ›å»º
- æˆ–é€šè¿‡APIåˆ›å»º

### 4. æŸ¥çœ‹APIæ–‡æ¡£
```
http://127.0.0.1:8111/docs
```

---

## âœ… é—®é¢˜è§£å†³æ€»ç»“

### å·²è§£å†³çš„é—®é¢˜

1. âœ… **å› å­è·¯ç”±åŠ è½½å¤±è´¥** - å·²é…ç½® panda_data_hub æ¨¡å—
2. âœ… **MongoDBè®¤è¯å¤±è´¥** - å·²æ”¹ä¸ºæ— è®¤è¯è¿žæŽ¥
3. âœ… **LLMåŠŸèƒ½ä¸å¯ç”¨** - å·²ä¿®å¤MongoDBè¿žæŽ¥
4. âœ… **æœåŠ¡å¯åŠ¨æˆåŠŸ** - æ‰€æœ‰åŠŸèƒ½æ­£å¸¸

### å½“å‰çŠ¶æ€

```
ðŸŸ¢ æœåŠ¡çŠ¶æ€: è¿è¡Œä¸­
ðŸŸ¢ MongoDB: å·²è¿žæŽ¥
ðŸŸ¢ å› å­API: æ­£å¸¸
ðŸŸ¢ Webç•Œé¢: æ­£å¸¸
ðŸŸ¢ æ•°æ®åº“: å¯è¯»å†™
```

---

## ðŸŽ‰ æ­å–œï¼

æ‚¨çš„PandaFactoræœåŠ¡å·²ç»**å®Œå…¨æ­£å¸¸è¿è¡Œ**ï¼

**çŽ°åœ¨å¯ä»¥**:
- âœ… åˆ›å»ºå’Œç®¡ç†å› å­
- âœ… æŸ¥çœ‹å› å­æ€§èƒ½
- âœ… ä½¿ç”¨APIæŽ¥å£
- âœ… ç¼–è¾‘å› å­ä»£ç 

**ç«‹å³ä½“éªŒ**: http://127.0.0.1:8111/factor/
